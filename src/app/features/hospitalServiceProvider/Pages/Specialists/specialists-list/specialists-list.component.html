<div class="container-fluid">
  <h1 class="h3 mb-2 text-gray-800">Specialists Management</h1>

  <div class="card shadow mb-4">
    <div class="card-header py-3 d-flex justify-content-between align-items-center">
      <h6 class="m-0 font-weight-bold text-primary">Specialists List</h6>
      <input type="text" class="form-control mr-2" style="width: 250px; display: inline-block;" placeholder="Search specialists..." [(ngModel)]="searchTerm" (ngModelChange)="filterSpecialists()" />
      <button class="btn btn-primary" (click)="openAddSpecialistPopup()">
        <i class="fas fa-plus"></i> Add Specialist
      </button>
    </div>
    <div class="card-body">
      <div class="table-responsive">
      <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
        <thead>
        <tr>
          <th>Speciality Name</th>
          <th>Description</th>
          <th>Status</th>
          
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let specialty of specialists">
          <td>{{specialty.specialtyName}}</td>
          <td>{{specialty.specialtyDesc | truncate:50}}</td>
          <td>
          <span (click)="ChangeSpecialtyStatus(specialty.specialtyId,!specialty.status)" class="badge btn" [ngClass]="{
            'badge-success': specialty.status === 1,
            'badge-danger': specialty.status !== 1
          }">
            {{ specialty.status === 1 ? 'Active' : 'Inactive' }}
          </span>
          </td>
          
        </tr>
        </tbody>
      </table>
      </div>
    </div>
  </div>

  <!-- Add Specialist Popup -->
  <div class="modal fade show" tabindex="-1" style="display: block; background: rgba(0,0,0,0.5);" *ngIf="showAddSpecialistPopup">
    <div class="modal-dialog">
      <div class="modal-content">
        <form (ngSubmit)="addSpecialist()" #addSpecialistForm="ngForm">
          <div class="modal-header">
            <h5 class="modal-title">Add Specialist</h5>
            <!-- <button type="button" class="close" (click)="showAddSpecialistPopup = false">
              <span>&times;</span>
            </button> -->
          </div>
         <div class="modal-body">
          <div class="form-group">
            <label for="availableSpecialist">Available Specialists</label>
            <select class="form-control" id="availableSpecialist" required [(ngModel)]="selectedSpecialistId" name="availableSpecialist">
              <option value="" disabled selected hidden>Please select the specialist</option>
              <option *ngFor="let specialist of availableSpecialists" [value]="specialist.id">
                {{ specialist.name }} -   {{" "}}{{ specialist.description ? specialist.description : 'No Description' }}
              </option>
            </select>
          </div>
         </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="showAddSpecialistPopup = false">Cancel</button>
            <button type="submit" class="btn btn-primary" [disabled]="!selectedSpecialistId">Add</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- End Popup -->
</div>