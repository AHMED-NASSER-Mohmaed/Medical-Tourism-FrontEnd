<div class="container-fluid">
  <h1 class="h3 mb-2 text-gray-800">Doctors Management</h1>
  <div class="card shadow mb-4">
    <div class="card-header py-3 d-flex justify-content-between align-items-center">
      <h6 class="m-0 font-weight-bold text-primary">Doctors List</h6>
      <input type="text" class="form-control mr-2" style="width: 250px; display: inline-block;" placeholder="Search doctors..." [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()" />
      <select class="form-control mr-2" style="width: 180px; display: inline-block;" [(ngModel)]="statusFilter" (ngModelChange)="onStatusFilterChange()">
        <option value="">All Statuses</option>
        <option value= "1">Active</option>
        <option value= "0">Inactive</option>
      </select>
      <button class="btn btn-primary" [routerLink]="['/hospital/doctor/add']">
        <i class="fas fa-plus"></i> Add Doctor
      </button>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
          <thead>
            <tr>
              
              <th>Image</th>
              <th>First Name</th>
              <th>Last Name</th>
              <th>Gender</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Date of Birth</th>
              <th>Status</th>
              <th>Specialty</th>
              <th>Hospital</th>
              <th>Actions</th>
            </tr>
          </thead>
            <tbody>
            <tr *ngFor="let doctor of doctors?.items">
              <td>
              <img [src]="doctor.imageURL ? doctor.imageURL : 'https://e7.pngegg.com/pngimages/84/165/png-clipart-united-states-avatar-organization-information-user-avatar-service-computer-wallpaper.png'" alt="Doctor Image" width="40" height="40" class="rounded-circle" />
              </td>
              <td>{{doctor.firstName}}</td>
              <td>{{doctor.lastName}}</td>
              <td>
              <span *ngIf="doctor.gender === 0">Male</span>
              <span *ngIf="doctor.gender === 1">Female</span>
              <span *ngIf="doctor.gender === 2">Other</span>
              </td>
              <td>{{doctor.email}}</td>
              <td>{{doctor.phone}}</td>
              <td>{{doctor.dateOfBirth ? (doctor.dateOfBirth | date:'yyyy-MM-dd') : 'N/A'}}</td>
              <td>
              <span class="badge" 
                  [ngClass]="{
                  'badge-success': doctor.status === 1,
                  'badge-danger': doctor.status === 0,
                  'badge-warning': doctor.status === 2,
                  'badge-secondary': doctor.status === 3
                  }">
                <ng-container [ngSwitch]="doctor.status">
                <span *ngSwitchCase="1">Active</span>
                <span *ngSwitchCase="0">Inactive</span>
                <span *ngSwitchCase="2">Suspended</span>
                <span *ngSwitchCase="3">Pending</span>
                <span *ngSwitchDefault>Unknown ({{doctor.status}})</span>
                </ng-container>
              </span>
              </td>
              <td>{{doctor.specialtyName}}</td>
              <td>{{doctor.hospitalName}}</td>
              <td>
              <button class="btn btn-info btn-sm" [routerLink]="['/doctors/edit', doctor.id]">
                <i class="fas fa-edit ">Edit</i>
              </button>
              </td>
            </tr>
            </tbody>
            <tfoot *ngIf="totalPages > 1">
            <tr>
              <td colspan="11">
              <nav>
                <ul class="pagination justify-content-center mb-0">
                <li class="page-item" [class.disabled]="currentPage === 1">
                  <button class="page-link" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">Previous</button>
                </li>
                <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" [class.active]="currentPage === (i + 1)">
                  <button class="page-link" (click)="changePage(i + 1)">{{ i + 1 }}</button>
                </li>
                <li class="page-item" [class.disabled]="currentPage === totalPages">
                  <button class="page-link" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">Next</button>
                </li>
                </ul>
              </nav>
              </td>
            </tr>
            </tfoot>
        </table>
      </div>
    </div>
  </div>
</div>
<router-outlet></router-outlet>