
<!-- Main Content -->
<div *ngIf=" doctor">
    <main class="profile-container">

        <!-- Left Column: Doctor Details -->
        <div class="profile-main-content">
            <div class="doctor-intro">
                <div>
                    <img [src]="doctor.imageURL || 'https://placehold.co/370x340'" alt="Photo of {{doctor.firstName}} {{doctor.lastName}}">
                </div>
                <div class="doctor-details">
                    <h1>Dr. {{doctor.firstName}} {{doctor.lastName}}</h1>
                    <p class="specialty">{{doctor.specialtyName}}</p>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="label">Qualification</span>
                            <span class="value">{{doctor.qualification}}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Experience</span>
                            <span class="value">{{doctor.yearsOfExperience}} years</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Hospital</span>
                            <span class="value">{{doctor.hospitalName}}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Location</span>
                            <span class="value">{{doctor.address}}, {{doctor.city}}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Contacts</span>
                            <span class="value">{{doctor.phone}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="about-doctor">
                <h3>About Dr. {{doctor.lastName}}</h3>
                <p>{{doctor.bio}}</p>
            </div>
        </div>

        <!-- Right Column: Schedule and Booking -->
        <aside class="profile-sidebar">
            <div class="sidebar-card schedule-card">
                <h3>SCHEDULE</h3>
                <div *ngIf="processedSchedule.length > 0; else noSchedule">
                    <div *ngFor="let daySchedule of processedSchedule" class="daily-schedule">
                        <p class="day-name">{{ daySchedule.dayName }}</p>
                        <div *ngFor="let s of daySchedule.slots" class="schedule-slot">
                            <span>{{ s.startTime | slice:0:5 }} - {{ s.endTime | slice:0:5 }}</span>
                            <span class="price">${{ s.price }}</span>
                        </div>
                    </div>
                </div>
                <ng-template #noSchedule>
                    <p class="text-center py-4">No schedule information available.</p>
                </ng-template>
            </div>

            <div class="sidebar-card booking-card">
                <h3>BOOK AN APPOINTMENT</h3>

<mat-form-field appearance="fill" class="custom-datepicker">
                    <input matInput
                           [matDatepicker]="picker"
                           [(ngModel)]="selectedDate"
                           [matDatepickerFilter]="dateFilter"
                           readonly
                           (click)="picker.open()"
                           placeholder="Choose a date"
                           (dateChange)="showDateError = false">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <div *ngIf="showDateError" class="validation-error">
                    Please select a date first.
                </div>

                <div class="mt-4">
                    <button type="button" class="booking-button" (click)="startBookingFlow()">
                        Continue Booking
                    </button>
                </div>
            </div>
        </aside>
    </main>
</div>
